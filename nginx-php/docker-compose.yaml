version: "3.8"

services:
  web_server:
    image: "nginx"
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - "./websites/nginx_conf:/etc/nginx/conf.d"
      - "./conf/rewrite:/etc/nginx/rewrite"
      - "./conf/nginx.conf:/etc/nginx/nginx.conf"
      - "./conf/enable-php.conf:/etc/nginx/enable-php.conf"
      - "./conf/fastcgi.conf:/etc/nginx/fastcgi.conf"
      - "/etc/letsencrypt/live:/etc/letsencrypt/live"
      - "./websites/wwwroot:/home/wwwroot"
      - "wwwlogs:/home/wwwlogs"
    restart: unless-stopped
    networks:
      - ngnix_with_php_net
  php_driver:
    build: ./build/php-fpm-mysqli
    volumes:
      - "./websites/wwwroot:/home/wwwroot"
    restart: unless-stopped
    networks:
      - ngnix_with_php_net
networks:
  ngnix_with_php_net:
volumes:
  wwwlogs:
    